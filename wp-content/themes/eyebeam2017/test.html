
<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - loaders - OBJ loader</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>

<body>

<script src="js/three/build/three.js"></script>
<script src="js/three/js/loaders/STLLoader.js"></script>
<script src="js/three/js/Detector.js"></script>


<div id="canvas">
<script>
//https://jsfiddle.net/kkxo8kc5/4/

        var container, stats;
        var camera, scene, renderer, logo;
        var mouseX = 0, mouseY = 0;
        var timer = 3;
        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

if ( Detector.webgl ) {
    init();
    animate();
} else {
    // no webGL
    container = document.createElement('div');
    container.innerHTML = "<img src='logo.png' height='50px' width='340px'>"
}


        function init() {
            var width= 340;
            var height= 80;
            container = document.getElementById( 'canvas' );
            document.body.appendChild( container );


        camera = new THREE.PerspectiveCamera( 45, 400 / 100, 1, 1000 );
        camera.position.z = 80;


      container.addEventListener('mousemove', onDocumentMouseMove, false);
container.addEventListener('touchstart', onDocumentTouchStart, false);
container.addEventListener('touchmove', onDocumentTouchMove, false);
container.addEventListener('mouseleave', ondocumentMouseLeave, false);

            // scene

            scene = new THREE.Scene();

            var ambient = new THREE.AmbientLight( 0x444444 );
            scene.add( ambient );

            // model

            var onProgress = function ( xhr ) {
                if ( xhr.lengthComputable ) {
                    var percentComplete = xhr.loaded / xhr.total * 100;
                    console.log( Math.round(percentComplete, 2) + '% downloaded' );
                }
            };

            var onError = function ( xhr ) { };

        var loader = new THREE.STLLoader();
            loader.load( 'eyebeam.stl', function ( geometry ) {

                var material = new THREE.MeshPhongMaterial( { color: 0x000, specular: 0x111111, shininess: 200 } );
                var logo = new THREE.Mesh( geometry, material );
                logoloaded = logo;
                logo.position.set( 0, 0, 0);
                logo.rotation.set( 0,( - Math.PI / 2 )*mouseY, 0 );
                logo.scale.set( 30, 30, 10 );

                logo.castShadow = true;
                logo.receiveShadow = true;

                scene.add( logo );

            } );

            //

            renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
            renderer.setPixelRatio( window.devicePixelRatio );
            renderer.setSize(width, height);
            container.appendChild( renderer.domElement );

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }


        function onWindowResize() {

            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.updateProjectionMatrix();


        }




        function onDocumentMouseMove( event ) {

            mouseX = ( event.clientX - windowHalfX );
            mouseY = ( event.clientY);


        }

        function onDocumentTouchStart(event) {

if (event.touches.length > 1) {

event.preventDefault();
    var timer = Date.now() * 0.005;
mouseX = event.touches[ 0 ].containerX - windowHalfX;
mouseY = event.touches[ 0 ].containerY - windowHalfY;

}

}

function onDocumentTouchMove(event) {

if (event.touches.length == 1) {

event.preventDefault();
    var timer = Date.now() * 0.005;
}

}

function ondocumentMouseLeave(event) {

var timer = 0;

}

        //

        function animate() {

            requestAnimationFrame( animate );
            if (logo){
    logo.rotation.y += .0002;
    }
            render();

        }

        function render() {



            camera.position.y = -(mouseY/20);
       // camera.position.x =  Math.cos( timer ) * 10;
            //console.log(camera.position.y);
        //	console.log(mouseY);
                    camera.lookAt( scene.position );

            renderer.render( scene, camera );

        }

    </script>
</div>
</body>
</html>
